<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>WASM Memory Panel</title>
    <style>
      body {
        font-family: sans-serif;
        padding: 1rem;
      }
      section {
        border: 1px solid #ccc;
        padding: 1rem;
        margin-bottom: 1rem;
      }
      label {
        display: block;
        margin-top: 0.5rem;
      }
      input[type="text"],
      input[type="number"] {
        width: 100%;
      }
      button {
        margin-top: 1rem;
      }
      pre {
        background: #f3f3f3;
        padding: 0.5rem;
      }
      .partition {
        float: left;
        width: 30%;
        padding: 1rem;
      }
    </style>
    <script src="panel.js"></script>
  </head>
  <body>
    <div style="position: absolute; top: 10px; right: 10px">
      <a
        href="https://github.com/kernel64/wasm-mem-tools-addon"
        target="_blank"
        title="View on GitHub"
      >
        <img
          src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"
          alt="GitHub"
          width="24"
          height="24"
          style="vertical-align: middle"
        />
      </a>
    </div>

    <h1>
      <img src="../res/icon48.png" alt="Logo" style="height: 32px; vertical-align: middle; margin-right: 10px;">
      WASM Memory Toolkit
      <span style="font-size: 0.5em; font-weight: normal"
        >by
        <a target="_blank" href="https://mabslabs.com">mabslabs.com</a></span
      >
    </h1>

    <section id="msg-err" class="contrast" style="display: none">
      <h4>ðŸš« No WASM memory found on this page</h4>
      <p>This page does not seem to use WebAssembly.</p>
    </section>

    <div class="partition">
      <!-- Memory Read -->
      <section>
        <h2>Read Memory</h2>
        <label
          >Address (decimal or hex): <input type="text" id="readAddress"
        /></label>
        <label
          >Type:
          <select id="readType">
            <option value="read8bitsUnsigned">Uint8</option>
            <option value="read8bitsSigned">Int8</option>
            <option value="read16bitsUnsigned">Uint16</option>
            <option value="read16bitsSigned">Int16</option>
            <option value="read32bitsUnsigned">Uint32</option>
            <option value="read32bitsSigned">Int32</option>
            <option value="read64bitsUnsigned">Uint64</option>
            <option value="read64bitsSigned">Int64</option>
            <option value="readFloat32">Float32</option>
            <option value="readFloat64">Float64</option>
          </select>
        </label>
        <button id="readMemoryBtn">Read</button>
        <pre id="readResult"></pre>
      </section>

      <!-- Memory Write -->
      <section>
        <h2>Write Memory</h2>
        <label>Address: <input type="text" id="writeAddress" /></label>
        <label
          >Type:
          <select id="writeType">
            <option value="write8bitsUnsigned">Uint8</option>
            <option value="write8bitsSigned">Int8</option>
            <option value="write16bitsUnsigned">Uint16</option>
            <option value="write16bitsSigned">Int16</option>
            <option value="write32bitsUnsigned">Uint32</option>
            <option value="write32bitsSigned">Int32</option>
            <option value="write64bitsUnsigned">Uint64</option>
            <option value="write64bitsSigned">Int64</option>
            <option value="writeFloat32">Float32</option>
            <option value="writeFloat64">Float64</option>
          </select>
        </label>
        <label>Value: <input type="text" id="writeValue" /></label>
        <button id="writeMemoryBtn">Write</button>
        <pre id="writeResult"></pre>
      </section>
    </div>

    <div class="partition">
      <!-- String Read/Write -->
      <section>
        <h2>Read/Write String</h2>
        <label>Address: <input type="text" id="stringAddress" /></label>
        <label
          >String (for write): <input type="text" id="stringValue"
        /></label>
        <button id="readStringBtn">Read String</button>
        <button id="writeStringBtn">Write String</button>
        <pre id="stringOutput"></pre>
      </section>

      <!-- Copy Memory -->
      <section>
        <h2>Copy Memory</h2>
        <label>Source Address: <input type="text" id="copySrc" /></label>
        <label>Target Address: <input type="text" id="copyDst" /></label>
        <label>Length (bytes): <input type="number" id="copyLen" /></label>
        <button id="copyMemoryBtn">Copy</button>
        <pre id="copyOutput"></pre>
      </section>
    </div>

    <div class="partition">
      <!-- Search -->
      <section>
        <h2>Search</h2>
        <label>Value to search: <input type="text" id="searchValue" /></label>
        <label
          >Type:
          <select id="searchType">
            <option value="search8bitsUnsigned">Uint8</option>
            <option value="search32bitsUnsigned">Uint32</option>
            <option value="searchFloat32">Float32</option>
            <option value="searchString">Exact String</option>
            <option value="searchStringRegex">Regex String</option>
          </select>
        </label>
        <button id="searchMemoryBtn">Search</button>
        <pre id="searchOutput"></pre>
      </section>
    </div>
  </body>
</html>
